{% extends 'base.html'%}
{% block head %}
    {% load static %}

    {% endblock %}
    {% block content %}
      <nav class="ticket-nav">
        <ul>
          <li><a href="#">My Tickets</a>
          <li><a href="#">All Tickets</a></li>
          <li><a href="/newticket">Create Ticket</a></li>
          <li><a href="#">Filter</a></li>
          <li style="width:200px;margin-left:10%;"><h6 style="display:inline-block" href="#">Search</h6><input type="text" style="margin-left:2%;width:120px" placeholder="Search..." id="ticketSearch" onkeyup="TicketSearch()" required></li>
          <li style="width:200px;margin-left:10%;">
            <h6 style="display:inline-block" href="#">Status</h6>       
            <select name="status" onchange="TicketSearch()">
              <option value="A">All</option>
              <option value="O">Open</option>
              <option value="C">Closed</option>
            </select>
          </li>
            <li style="width:200px;margin-left:10%;">
              <h6 style="display:inline-block" href="#">Assigned</h6>       
              <select name="assigned" onchange="TicketSearch()">
                <option value="A">All</option>
                <option value="AS">Assigned</option>
                <option value="NA">Not Assigned</option>
              </select>
            </li>
            <li style="width:200px;margin-left:10%;">   
            <h6 style="display:inline-block" href="#">Priority</h6>       
            <select name="priority" onchange="TicketSearch()">
              <option value="A">All</option>
              <option value="R">Routine</option>
              <option value="U">Urgent</option>
              <option value="E">Emergency</option>
            </select></li>

        </ul>
      </nav>
        <div class="ticketTable" id="ticketDiv">

        {% for ticket in tickets %}
        <div onclick="getTicketInfo('{{ticket.ticketNum}}')" class="ticketInfo">
           <h3 class="subTicketHeaders">{{ticket.ticketNum}} - {{ticket.title}}</h3>
           <h4 class="subTicketHeaders">Status:
           {% if ticket.status == "O" %}
            Open
            {% else %}
            Closed
            {% endif %}
           </h4>
            <h4 class="{{ticket.priority}}">Priority:
            {% if ticket.priority == "U" %}
            Urgent
            {% elif ticket.priority == "E" %}
            Emergency
            {% else %}
            Routine
            {% endif %}
            </h4>
            <h4 class="subTicketHeaders">Assigned:
            {% if ticket.is_assigned == True %}
                <p class="assigned{{ticket.is_assigned}}"> &#x2713;</p>
            {% else %}
                <p class="assigned{{ticket.is_assigned}}">&#x2715;</p>
            {% endif %}
            </h4>
           <p class="ticketP">Creation Date: {{ticket.date_created}}</p>
            <p class="ticketP">Due Date: {{ticket.due_date}}</p>
            <p class="ticketP">Last Checked: {{ticket.last_checked}}</p>

       </div>

      {% endfor %}
    {% endblock %}
    {% block scripts %}
    <script type="text/javascript" src="{% static 'javascript/homefunc.js' %}"></script>
    
    {% endblock %}

